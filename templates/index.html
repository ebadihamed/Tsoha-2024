<!DOCTYPE html>
<html>
<head>
    <title>Blogisovellus</title>
    <style>
        .blog-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }
        .logging-container {
            position: absolute;
            top: 15px;
            right: 10px;
            border: 1px solid #ccc;
            padding: 5px 10px;
        }
    </style>

</head>
<body>
    <h1>Blogisovellus</h1>

    <!-- Show this if logged in-->
    {% if session.username %}
    <div class="logging-container">
        <p>Logged in ( {{session.username}} )</p>
        <a href="/log_out">Log out</a>
    </div>
    <br>
    {% for blog in blogs %}
    <div class="blog-box">
        <p>{{ blog.content }}</p>
        <p>Created Time: {{ blog.created_at }}</p>
        <p>Likes: {{ blog.likes }}</p>
        <form action="/like" method="POST">
            <input type="submit" value="like"/> 
            <input type="hidden" value="{{blog.id}}" name="blog_id"/> 
        </form>
        {% if session.user_id == blog.user_id %}
        <form action="/edit" method="POST">
            <input type="submit" value="edit" name="name"/>
            <input type="hidden" value="{{ blog.id }}" name="blog_id"/> 
        </form>
        {% endif %}
    </div>
    {% endfor %}
    <a href="/new_blog">Create a new blog</a>

    <!-- Show this if not logged in-->
    {% else %}
    <div class="loggin-container">
        <a href="/sign_in">Sign in</a>
    </div>
    <br>
    <hr>
    {% for blog in blogs %}
    {{ blog.content }}
    <hr>
    {% endfor %}
    {% endif %}
</body>
</html>